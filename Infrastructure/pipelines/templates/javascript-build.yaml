parameters:
- name: directory
  type: string
- name: runTests
  type: boolean
  default: true
- name: failWithTests
  type: boolean
  default: false

steps:
- task: NodeTool@0
  displayName: Install Node
  inputs:
    versionSpec: 12.x
- script: yarn install
  displayName: Install Packages
  workingDirectory: ${{ parameters.directory }}
- script: yarn test
  condition: ${{ parameters.runTests }}
  continueOnError: ${{ not(parameters.failWithTests) }}
  displayName: Test Website
  workingDirectory: ${{ parameters.directory }}
- script: yarn build
  displayName: Build Website
  workingDirectory: ${{ parameters.directory }}